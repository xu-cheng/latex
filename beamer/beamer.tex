<%= input "./common/head.tex" %>

\newif\if@biblatex
\@biblatexfalse
\DeclareOptionX{biblatex}[]{
    \@biblatextrue
    \ifthenelse{\equal{#1}{}}{
        \PassOptionsToPackage{style=ieee-alphabetic,giveninits=true,maxnames=10,dashed=false}{biblatex}
        }{
        \PassOptionsToPackage{#1}{biblatex}
    }
}

\DeclareOptionX*{\PassOptionsToClass{\CurrentOption}{beamer}}
\ProcessOptionsX%
\PassOptionsToPackage{table,dvipsnames}{xcolor}
\LoadClass[compress,xcolor]{beamer}

<%= input "./common/basic.tex" %>

% Beamer theme
\usetheme{metropolis}
\metroset{block=fill,numbering=fraction}
\RequirePackage{appendixnumberbeamer}

\setbeamerfont{caption}{size=\scriptsize}
\renewcommand{\figurename}{Fig.}

% Justify text inside list environment
% Ref: http://liam0205.me/2017/04/11/justifying-in-beamer-s-lists/
\xpatchcmd{\itemize}{\raggedright}{\justifying}{}{}
\xpatchcmd{\beamer@enum@}{\raggedright}{\justifying}{}{}
\xpatchcmd{\@@description}{\raggedright}{\justifying}{}{}

% Beamer TOC
\newcommand{\PrintTOC}{
    \begin{frame}{\contentsname}
        \setbeamertemplate{section in toc}[sections numbered]
        \tableofcontents[hideallsubsections]
    \end{frame}
}

% Bibliography
\if@biblatex
    \RequirePackage{biblatex}
    % url break in bibliography
    \setcounter{biburllcpenalty}{1}
    \setcounter{biburlucpenalty}{1}
    \setcounter{biburlnumpenalty}{1}
    \newcommand{\PrintRef}{
        \begingroup
        \setbeamertemplate{frametitle continuation}{}
        \begin{frame}[t,allowframebreaks]{\refname}
            \bookmark[page=\thepage,startatroot]{\refname}
            \setbeamertemplate{bibliography item}[text]
            \renewcommand*{\bibfont}{\scriptsize}
            \printbibliography[heading=none]%
        \end{frame}
        \endgroup
    }
\fi

% Thanks Q&A page
\newcommand{\PrintQA}{
    \begin{frame}[standout]
        Thanks \\
        Questions?
    \end{frame}
}

% https://tex.stackexchange.com/a/226939/16996
\resetcounteronoverlays{algocf}
